(self.webpackChunkreact_nextflix_clone=self.webpackChunkreact_nextflix_clone||[]).push([[907],{819:(t,e,r)=>{"use strict";var n=r(298);r.o(n,"useQuery")&&r.d(e,{useQuery:function(){return n.useQuery}})},298:()=>{},907:(t,e,r)=>{"use strict";r.d(e,{useQuery:()=>i.useQuery});var n=r(819);r.o(n,"useQuery")&&r.d(e,{useQuery:function(){return n.useQuery}});var i=r(71)},71:(t,e,r)=>{"use strict";r.d(e,{useQuery:()=>P});var n=r(168),i="undefined"===typeof window;function s(){}function u(t){return"number"===typeof t&&t>=0&&t!==1/0}function o(t,e){if(t===e)return t;var r=Array.isArray(t)&&Array.isArray(e);if(r||c(t)&&c(e)){for(var n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,u=r?[]:{},a=0,l=0;l<s;l++){var h=r?l:i[l];u[h]=o(t[h],e[h]),u[h]===t[h]&&a++}return n===s&&a===n?t:u}return e}function c(t){if(!a(t))return!1;var e=t.constructor;if("undefined"===typeof e)return!0;var r=e.prototype;return!!a(r)&&!!r.hasOwnProperty("isPrototypeOf")}function a(t){return"[object Object]"===Object.prototype.toString.call(t)}function l(t){return"string"===typeof t||Array.isArray(t)}function h(t){Promise.resolve().then(t).catch((function(t){return setTimeout((function(){throw t}))}))}var f=new(function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=t.prototype;return e.batch=function(t){var e;this.transactions++;try{e=t()}finally{this.transactions--,this.transactions||this.flush()}return e},e.schedule=function(t){var e=this;this.transactions?this.queue.push(t):h((function(){e.notifyFn(t)}))},e.batchCalls=function(t){var e=this;return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.schedule((function(){t.apply(void 0,n)}))}},e.flush=function(){var t=this,e=this.queue;this.queue=[],e.length&&h((function(){t.batchNotifyFn((function(){e.forEach((function(e){t.notifyFn(e)}))}))}))},e.setNotifyFunction=function(t){this.notifyFn=t},e.setBatchNotifyFunction=function(t){this.batchNotifyFn=t},t}()),d=r(950).unstable_batchedUpdates;f.setBatchNotifyFunction(d);var p=console;function v(){return p}var y=console;p=y;var b=r(387),R=function(){function t(){this.listeners=[]}var e=t.prototype;return e.subscribe=function(t){var e=this,r=t||function(){};return this.listeners.push(r),this.onSubscribe(),function(){e.listeners=e.listeners.filter((function(t){return t!==r})),e.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}(),m=new(function(t){function e(){var e;return(e=t.call(this)||this).setup=function(t){var e;if(!i&&(null==(e=window)?void 0:e.addEventListener)){var r=function(){return t()};return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),function(){window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}},e}(0,b.A)(e,t);var r=e.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)},r.setEventListener=function(t){var e,r=this;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((function(t){"boolean"===typeof t?r.setFocused(t):r.onFocus()}))},r.setFocused=function(t){this.focused=t,t&&this.onFocus()},r.onFocus=function(){this.listeners.forEach((function(t){t()}))},r.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},e}(R));var Q=function(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent};var g=function(t){function e(e,r){var n;return(n=t.call(this)||this).client=e,n.options=r,n.trackedProps=[],n.selectError=null,n.bindMethods(),n.setOptions(r),n}(0,b.A)(e,t);var r=e.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),S(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return C(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return C(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(t,e){var r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(t),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();var i=this.hasListeners();i&&E(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(e),!i||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.staleTime===r.staleTime||this.updateStaleTimeout();var s=this.computeRefetchInterval();!i||this.currentQuery===n&&this.options.enabled===r.enabled&&s===this.currentRefetchInterval||this.updateRefetchInterval(s)},r.getOptimisticResult=function(t){var e=this.client.defaultQueryObserverOptions(t),r=this.client.getQueryCache().build(this.client,e);return this.createResult(r,e)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(t,e){var r=this,n={},i=function(t){r.trackedProps.includes(t)||r.trackedProps.push(t)};return Object.keys(t).forEach((function(e){Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:function(){return i(e),t[e]}})})),(e.useErrorBoundary||e.suspense)&&i("error"),n},r.getNextResult=function(t){var e=this;return new Promise((function(r,n){var i=e.subscribe((function(e){e.isFetching||(i(),e.isError&&(null==t?void 0:t.throwOnError)?n(e.error):r(e))}))}))},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(t){return this.fetch((0,n.A)({},t,{meta:{refetchPage:null==t?void 0:t.refetchPage}}))},r.fetchOptimistic=function(t){var e=this,r=this.client.defaultQueryObserverOptions(t),n=this.client.getQueryCache().build(this.client,r);return n.fetch().then((function(){return e.createResult(n,r)}))},r.fetch=function(t){var e=this;return this.executeFetch(t).then((function(){return e.updateResult(),e.currentResult}))},r.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(s)),e},r.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!i&&!this.currentResult.isStale&&u(this.options.staleTime)){var e,r,n=(e=this.currentResult.dataUpdatedAt,r=this.options.staleTime,Math.max(e+(r||0)-Date.now(),0))+1;this.staleTimeoutId=setTimeout((function(){t.currentResult.isStale||t.updateResult()}),n)}},r.computeRefetchInterval=function(){var t;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t},r.updateRefetchInterval=function(t){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=t,!i&&!1!==this.options.enabled&&u(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(e.options.refetchIntervalInBackground||m.isFocused())&&e.executeFetch()}),this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(t,e){var r,n=this.currentQuery,i=this.options,s=this.currentResult,u=this.currentResultState,c=this.currentResultOptions,a=t!==n,l=a?t.state:this.currentQueryInitialState,h=a?this.currentResult:this.previousQueryResult,f=t.state,d=f.dataUpdatedAt,p=f.error,y=f.errorUpdatedAt,b=f.isFetching,R=f.status,m=!1,Q=!1;if(e.optimisticResults){var g=this.hasListeners(),C=!g&&S(t,e),O=g&&E(t,n,e,i);(C||O)&&(b=!0,d||(R="loading"))}if(e.keepPreviousData&&!f.dataUpdateCount&&(null==h?void 0:h.isSuccess)&&"error"!==R)r=h.data,d=h.dataUpdatedAt,R=h.status,m=!0;else if(e.select&&"undefined"!==typeof f.data)if(s&&f.data===(null==u?void 0:u.data)&&e.select===this.selectFn)r=this.selectResult;else try{this.selectFn=e.select,r=e.select(f.data),!1!==e.structuralSharing&&(r=o(null==s?void 0:s.data,r)),this.selectResult=r,this.selectError=null}catch(I){v().error(I),this.selectError=I}else r=f.data;if("undefined"!==typeof e.placeholderData&&"undefined"===typeof r&&("loading"===R||"idle"===R)){var F;if((null==s?void 0:s.isPlaceholderData)&&e.placeholderData===(null==c?void 0:c.placeholderData))F=s.data;else if(F="function"===typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&"undefined"!==typeof F)try{F=e.select(F),!1!==e.structuralSharing&&(F=o(null==s?void 0:s.data,F)),this.selectError=null}catch(I){v().error(I),this.selectError=I}"undefined"!==typeof F&&(R="success",r=F,Q=!0)}return this.selectError&&(p=this.selectError,r=this.selectResult,y=Date.now(),R="error"),{status:R,isLoading:"loading"===R,isSuccess:"success"===R,isError:"error"===R,isIdle:"idle"===R,data:r,dataUpdatedAt:d,error:p,errorUpdatedAt:y,failureCount:f.fetchFailureCount,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>l.dataUpdateCount||f.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&"loading"!==R,isLoadingError:"error"===R&&0===f.dataUpdatedAt,isPlaceholderData:Q,isPreviousData:m,isRefetchError:"error"===R&&0!==f.dataUpdatedAt,isStale:w(t,e),refetch:this.refetch,remove:this.remove}},r.shouldNotifyListeners=function(t,e){if(!e)return!0;var r=this.options,n=r.notifyOnChangeProps,i=r.notifyOnChangePropsExclusions;if(!n&&!i)return!0;if("tracked"===n&&!this.trackedProps.length)return!0;var s="tracked"===n?this.trackedProps:n;return Object.keys(t).some((function(r){var n=r,u=t[n]!==e[n],o=null==s?void 0:s.some((function(t){return t===r})),c=null==i?void 0:i.some((function(t){return t===r}));return u&&!c&&(!s||o)}))},r.updateResult=function(t){var e=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!function(t,e){if(t&&!e||e&&!t)return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0}(this.currentResult,e)){var r={cache:!0};!1!==(null==t?void 0:t.listeners)&&this.shouldNotifyListeners(this.currentResult,e)&&(r.listeners=!0),this.notify((0,n.A)({},r,t))}},r.updateQuery=function(){var t=this.client.getQueryCache().build(this.client,this.options);if(t!==this.currentQuery){var e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}},r.onQueryUpdate=function(t){var e={};"success"===t.type?e.onSuccess=!0:"error"!==t.type||t.error instanceof Q||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},r.notify=function(t){var e=this;f.batch((function(){t.onSuccess?(null==e.options.onSuccess||e.options.onSuccess(e.currentResult.data),null==e.options.onSettled||e.options.onSettled(e.currentResult.data,null)):t.onError&&(null==e.options.onError||e.options.onError(e.currentResult.error),null==e.options.onSettled||e.options.onSettled(void 0,e.currentResult.error)),t.listeners&&e.listeners.forEach((function(t){t(e.currentResult)})),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})}))},e}(R);function S(t,e){return function(t,e){return!1!==e.enabled&&!t.state.dataUpdatedAt&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||t.state.dataUpdatedAt>0&&C(t,e,e.refetchOnMount)}function C(t,e,r){if(!1!==e.enabled){var n="function"===typeof r?r(t):r;return"always"===n||!1!==n&&w(t,e)}return!1}function E(t,e,r,n){return!1!==r.enabled&&(t!==e||!1===n.enabled)&&(!r.suspense||"error"!==t.state.status)&&w(t,r)}function w(t,e){return t.isStaleByTime(e.staleTime)}var O=r(43);function F(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var I=O.createContext(F()),T=function(){return O.useContext(I)},U=O.createContext(void 0),A=O.createContext(!1);function x(t){return t&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=U),window.ReactQueryClientContext):U}var k=function(){var t=O.useContext(x(O.useContext(A)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t};function P(t,e,r){var i=function(t,e,r){return l(t)?"function"===typeof e?(0,n.A)({},r,{queryKey:t,queryFn:e}):(0,n.A)({},e,{queryKey:t}):t}(t,e,r);return function(t,e){var r=O.useRef(!1),n=O.useState(0)[1],i=k(),s=T(),u=i.defaultQueryObserverOptions(t);u.optimisticResults=!0,u.onError&&(u.onError=f.batchCalls(u.onError)),u.onSuccess&&(u.onSuccess=f.batchCalls(u.onSuccess)),u.onSettled&&(u.onSettled=f.batchCalls(u.onSettled)),u.suspense&&("number"!==typeof u.staleTime&&(u.staleTime=1e3),0===u.cacheTime&&(u.cacheTime=1)),(u.suspense||u.useErrorBoundary)&&(s.isReset()||(u.retryOnMount=!1));var o,c,a,l=O.useState((function(){return new e(i,u)}))[0],h=l.getOptimisticResult(u);if(O.useEffect((function(){r.current=!0,s.clearReset();var t=l.subscribe(f.batchCalls((function(){r.current&&n((function(t){return t+1}))})));return l.updateResult(),function(){r.current=!1,t()}}),[s,l]),O.useEffect((function(){l.setOptions(u,{listeners:!1})}),[u,l]),u.suspense&&h.isLoading)throw l.fetchOptimistic(u).then((function(t){var e=t.data;null==u.onSuccess||u.onSuccess(e),null==u.onSettled||u.onSettled(e,null)})).catch((function(t){s.clearReset(),null==u.onError||u.onError(t),null==u.onSettled||u.onSettled(void 0,t)}));if(h.isError&&!s.isReset()&&!h.isFetching&&(o=u.suspense,c=u.useErrorBoundary,a=[h.error,l.getCurrentQuery()],"function"===typeof c?c.apply(void 0,a):"boolean"===typeof c?c:o))throw h.error;return"tracked"===u.notifyOnChangeProps&&(h=l.trackResult(h,u)),h}(i,g)}}}]);
//# sourceMappingURL=907.a3bf73db.chunk.js.map